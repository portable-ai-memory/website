---
import { Icon } from 'astro-icon/components';
import {useTranslations} from '../i18n/components';

interface Props {
    locale?: string;
}

const {locale = ''} = Astro.props;
const ui = useTranslations(locale);

const translatedPrefix = locale ? `/${locale}` : '';

const providers = [
    {title: 'ChatGPT', subtitle: 'OpenAI', href: `${translatedPrefix}/providers/openai/`, icon: 'simple-icons:openai'},
    {title: 'Claude', subtitle: 'Anthropic', href: `${translatedPrefix}/providers/anthropic/`, icon: 'simple-icons:claude'},
    {title: 'Gemini', subtitle: 'Google', href: `${translatedPrefix}/providers/google/`, icon: 'simple-icons:googlegemini'},
    {title: 'Copilot', subtitle: 'Microsoft', href: `${translatedPrefix}/providers/microsoft/`, icon: 'simple-icons:githubcopilot'},
    {title: 'Local LLMs', subtitle: ui.browseProviders, href: `${translatedPrefix}/providers/overview/`, icon: 'simple-icons:ollama'},
];

const ctas = [
    {
        title: ui.readSpec,
        description: ui.specDescription,
        href: `${translatedPrefix}/spec/v1.0/`,
        icon: 'lucide:file-text',
    },
    {
        title: ui.viewSchema,
        description: ui.schemaDescription,
        href: `${translatedPrefix}/schema/overview/`,
        icon: 'lucide:braces',
    },
    {
        title: ui.seeExamples,
        description: ui.examplesDescription,
        href: `${translatedPrefix}/examples/overview/`,
        icon: 'lucide:code',
    },
    {
        title: ui.quickStart,
        description: ui.quickStartDescription,
        href: `${translatedPrefix}/getting-started/quick-start/`,
        icon: 'lucide:arrow-right-circle',
    },
];
---

<style>
    .homepage-cards {
        --hc-bg-card: var(--pam-card-bg);
        --hc-border: var(--pam-card-border);
        --hc-text: var(--pam-text);
        --hc-text-muted: var(--pam-text-muted);
        --hc-accent: var(--pam-accent);
        --hc-badge-bg: var(--pam-badge-bg);
        --hc-badge-text: var(--pam-badge-text);
        margin-top: 2rem;
        font-family: var(--pam-font-svg);
    }

    /* Provider section */
    .provider-section {
        margin-bottom: 3.5rem;
    }

    .provider-intro {
        margin-bottom: 1.5rem;
    }

    .provider-intro p {

        font-size: 0.9375rem;
        font-weight: 500;
        color: var(--hc-text);
        margin: 0 0 6px;
    }

    .provider-intro small {

        font-size: 0.75rem;
        color: var(--hc-text-muted);
        display: block;
        font-style: italic;
    }

    .provider-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 16px;
    }

    @media (max-width: 900px) {
        .provider-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (max-width: 560px) {
        .provider-grid {
            grid-template-columns: 1fr;
        }
    }

    .provider-card {
        display: flex;
        flex-direction: column;
        background: var(--hc-bg-card);
        border: 1px solid var(--hc-border);
        border-radius: 10px;
        padding: 16px;
        margin-top: 0;
        text-decoration: none;
        color: inherit;
        transition: border-color 0.15s ease;
        min-width: 0;
    }

    .provider-card:hover {
        border-color: var(--hc-accent);
        text-decoration: none;
    }

    .provider-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .provider-icon {
        flex-shrink: 0;
        width: 18px;
        height: 18px;
        color: var(--hc-text-muted);
    }

    .provider-card .card-title {

        font-size: 0.9375rem;
        font-weight: 600;
        color: var(--hc-text);
        margin: 0;
        line-height: 1.3;
    }

    .provider-card .card-subtitle {

        font-size: 0.75rem;
        color: var(--hc-text-muted);
        margin: 2px 0 0;
    }

    .provider-card .card-badge {

        font-size: 0.6875rem;
        font-weight: 500;
        color: var(--hc-badge-text);
        background: var(--hc-badge-bg);
        border-radius: 9999px;
        padding: 0.125rem 0.625rem;
        margin-top: auto;
        line-height: 1.6;
        display: inline-block;
        align-self: flex-start;
    }

    /* CTA section */
    .cta-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
    }

    @media (max-width: 560px) {
        .cta-grid {
            grid-template-columns: 1fr;
        }
    }

    .cta-card {
        display: flex;
        align-items: center;
        gap: 16px;
        background: var(--hc-bg-card);
        border: 1px solid var(--hc-border);
        border-radius: 10px;
        padding: 20px;
        text-decoration: none;
        color: inherit;
        transition: border-color 0.15s ease;
    }

    .cta-card:hover {
        border-color: var(--hc-accent);
        text-decoration: none;
    }

    .cta-card .cta-icon {
        flex-shrink: 0;
        width: 24px;
        height: 24px;
        color: var(--hc-accent);
    }

    .cta-card .cta-icon svg {
        width: 24px;
        height: 24px;
        display: block;
    }

    .cta-card .cta-text .card-title {

        font-size: 0.9375rem;
        font-weight: 600;
        color: var(--hc-text);
        margin: 0;
        line-height: 1.3;
    }

    .cta-card .cta-text .card-description {

        font-size: 0.8125rem;
        color: var(--hc-text-muted);
        margin: 2px 0 0;
    }
</style>

<div class="homepage-cards">
    <!-- Provider Compatibility -->
    <section class="provider-section">
        <div class="provider-intro">
            <p>{ui.providerIntro}</p>
            <small>{ui.providerDisclaimer}</small>
        </div>
        <div class="provider-grid">
            {providers.map(({title, subtitle, href, icon}) => (
                    <a class="provider-card" href={href}>
                        <div class="provider-header">
                            <Icon name={icon} class="provider-icon" />
                            <div class="card-title">{title}</div>
                        </div>
                        <div class="card-subtitle">{subtitle}</div>
                        <span class="card-badge">{ui.officialBadge}</span>
                    </a>
            ))}
        </div>
    </section>

    <!-- CTA Cards -->
    <section>
        <div class="cta-grid">
            {ctas.map(({title, description, href, icon}) => (
                    <a class="cta-card" href={href}>
                        <div class="cta-icon">
                            <Icon name={icon} />
                        </div>
                        <div class="cta-text">
                            <div class="card-title">{title}</div>
                            <div class="card-description">{description}</div>
                        </div>
                    </a>
            ))}
        </div>
    </section>
</div>
